WEBVTT

00:00:00.400 --> 00:00:01.800 align:middle
みなさん、こんにちは。

00:00:01.960 --> 00:00:06.120 align:middle
この講義では Pharo での

00:00:06.280 --> 00:00:07.560 align:middle
クラスとメソッドの定義を説明します。

00:00:08.400 --> 00:00:10.920 align:middle
Pharo に特有なこととして

00:00:11.080 --> 00:00:15.360 align:middle
メソッドやクラスを定義する専用の
構文がない、ということがあります。

00:00:15.760 --> 00:00:17.840 align:middle
クラスやメソッドはツールで定義されます。

00:00:18.000 --> 00:00:22.200 align:middle
ツールがクラスやメソッドを生成する
コンテキストを提供します。

00:00:23.760 --> 00:00:27.640 align:middle
これが Pharo で主に使う
コードブラウザーです。

00:00:27.800 --> 00:00:29.200 align:middle
Nautilus（ノーチラス）です。

00:00:29.360 --> 00:00:32.720 align:middle
下の部分に

00:00:32.880 --> 00:00:35.280 align:middle
Point クラスの定義があります。

00:00:35.440 --> 00:00:40.880 align:middle
Point クラスのスーパークラスは
Object クラスだと解ります。

00:00:41.040 --> 00:00:44.080 align:middle
そしてインスタンス変数として
x と y があります。

00:00:44.480 --> 00:00:49.480 align:middle
スーパークラスと
2 つのインスタンス変数 x と y と

00:00:51.240 --> 00:00:53.960 align:middle
一番下にはパッケージ名があります。

00:00:54.120 --> 00:00:56.560 align:middle
このクラスが入っているパッケージです。

00:00:56.840 --> 00:01:02.240 align:middle
これからスライドの中で、新しいサブクラスを
定義する時にこんなコードを使います。

00:01:02.680 --> 00:01:05.200 align:middle
見ての通り
Pharo でクラスを生成するには

00:01:05.360 --> 00:01:08.200 align:middle
スーパークラスにそのためのメッセージを
送ります。

00:01:08.360 --> 00:01:11.160 align:middle
サブクラスの名前を引数にして。

00:01:12.960 --> 00:01:15.600 align:middle
subclass:instanceVariableNames:

00:01:15.760 --> 00:01:17.560 align:middle
classVariableNames:package:
は

00:01:17.720 --> 00:01:20.440 align:middle
Object クラスに送られる
メッセージです。

00:01:20.600 --> 00:01:23.480 align:middle
引数として、サブクラスの名前と

00:01:23.640 --> 00:01:26.480 align:middle
インスタンス変数のリストと

00:01:26.640 --> 00:01:29.000 align:middle
パッケージの名前を付けます。

00:01:30.160 --> 00:01:31.800 align:middle
メソッド定義については

00:01:32.080 --> 00:01:35.240 align:middle
これまた下の部分にありますが

00:01:35.760 --> 00:01:37.520 align:middle
メソッドの名前

00:01:37.960 --> 00:01:39.600 align:middle
コメント

00:01:40.400 --> 00:01:42.320 align:middle
そしてメソッドのコードとなります。

00:01:42.480 --> 00:01:44.560 align:middle
メソッドはクラスに属します。

00:01:44.720 --> 00:01:47.360 align:middle
メソッドを定義する構文では

00:01:47.520 --> 00:01:51.960 align:middle
そのメソッドが属するクラスについての
情報がありません。

00:01:52.120 --> 00:01:56.840 align:middle
実際には
コードブラウザでクラスを選択しますが

00:01:57.840 --> 00:02:01.720 align:middle
そのクラスが
そのメソッドが属するクラスになります。

00:02:04.440 --> 00:02:07.840 align:middle
スライドの中ではメソッドが属するクラス
は必要な情報なので

00:02:08.000 --> 00:02:12.520 align:middle
単純にメソッド定義の中身をコピーする
わけにはいきません。

00:02:12.680 --> 00:02:15.360 align:middle
メソッド名の前に接頭辞をつけて

00:02:15.520 --> 00:02:19.320 align:middle
メソッドが属するクラスを示します。

00:02:20.280 --> 00:02:21.960 align:middle
追加するのは

00:02:23.960 --> 00:02:27.240 align:middle
クラスの名前で

00:02:27.400 --> 00:02:31.280 align:middle
定義しているメソッドを追加する
対象となるクラスを示します。

00:02:31.520 --> 00:02:33.960 align:middle
つまり、コードブラウザ上では

00:02:34.200 --> 00:02:37.000 align:middle
クラスはブラウザの中での

00:02:37.160 --> 00:02:39.160 align:middle
選択としてしか出てきません。

00:02:40.000 --> 00:02:44.080 align:middle
Integer クラスの factorial メソッド
を定義します。

00:02:44.920 --> 00:02:47.760 align:middle
メッセージについて
思い出して欲しいのですが

00:02:48.000 --> 00:02:51.760 align:middle
factorial メソッドを定義していますが

00:02:53.080 --> 00:02:55.840 align:middle
=, >, *, - 等といった

00:02:56.000 --> 00:03:01.800 align:middle
二項メッセージを使います。

00:03:01.960 --> 00:03:04.040 align:middle
二項メッセージです。

00:03:04.200 --> 00:03:09.040 align:middle
factorial メソッドに再帰します。

00:03:09.200 --> 00:03:12.280 align:middle
factorial は単項メッセージで

00:03:12.440 --> 00:03:15.040 align:middle
数値オブジェクトに送られます。

00:03:16.240 --> 00:03:18.600 align:middle
そしてキーワードメッセージが
2 つあります。

00:03:19.680 --> 00:03:23.560 align:middle
IfTrue: が 2 回でて、
それと error: です。

00:03:24.640 --> 00:03:27.120 align:middle
そして最後にキャレットがあります。

00:03:27.280 --> 00:03:29.560 align:middle
返り値を返して

00:03:29.720 --> 00:03:31.520 align:middle
メソッドから脱出します。

00:03:33.000 --> 00:03:35.360 align:middle
リターンについては

00:03:35.520 --> 00:03:37.640 align:middle
Pharo ではデフォルトで

00:03:37.800 --> 00:03:39.560 align:middle
self を返します。

00:03:39.720 --> 00:03:41.480 align:middle
つまり、現在のオブジェクトです。

00:03:42.080 --> 00:03:43.880 align:middle
上に示したコードは

00:03:44.040 --> 00:03:47.080 align:middle
下に示したコードと全く同じです。

00:03:47.240 --> 00:03:51.960 align:middle
つまり、メソッドの最後にある
^ self はあってもなくても良いです。

00:03:52.920 --> 00:03:56.720 align:middle
クラスにメッセージを送ります。
クラスメソッドです。

00:03:56.880 --> 00:03:58.520 align:middle
クラスもオブジェクトなので

00:03:58.680 --> 00:04:01.280 align:middle
クラスにメッセージを送ることができます。

00:04:01.440 --> 00:04:03.840 align:middle
クラスメソッドを定義するには

00:04:04.000 --> 00:04:07.000 align:middle
Nautilus のクラスボタンを押してから

00:04:09.040 --> 00:04:11.920 align:middle
メソッドを定義してください。

00:04:12.160 --> 00:04:16.320 align:middle
スライドでは class と書くことで

00:04:17.880 --> 00:04:22.040 align:middle
クラス上で実行されるメソッドである
ことを示して

00:04:22.200 --> 00:04:25.320 align:middle
クラスのインスタンスで実行される
メソッドと区別します。

00:04:25.760 --> 00:04:30.440 align:middle
ここで x:y: メソッドは
Point クラス上で実行されます。

00:04:30.600 --> 00:04:33.040 align:middle
Point クラスのインスタンス上では
ありません。

00:04:33.960 --> 00:04:35.960 align:middle
この講義で

00:04:36.200 --> 00:04:37.840 align:middle
覚えておくことは

00:04:38.640 --> 00:04:41.520 align:middle
クラスは特別な構文で定義されるのではなく

00:04:41.680 --> 00:04:45.480 align:middle
スーパークラスへのメッセージ送信で
定義されるということ。

00:04:46.960 --> 00:04:49.560 align:middle
クラスはパッケージ内で定義されること。

00:04:49.720 --> 00:04:53.600 align:middle
パッケージ名はそのメッセージの
引数として渡されること。

00:04:54.880 --> 00:04:56.720 align:middle
全てのメソッドは public だということ。

00:04:56.880 --> 00:05:01.480 align:middle
メソッドが public であることを示す
キーワードはありません。全てそうだから。

00:05:01.640 --> 00:05:05.120 align:middle
メソッドが protected や private
だという概念はありません。

00:05:07.240 --> 00:05:10.880 align:middle
デフォルトでは、メソッドはレシーバ自身
つまり self を返すということ。

00:05:11.040 --> 00:05:14.520 align:middle
self 以外のものを返すためには
キャレットを使います。

00:05:17.160 --> 00:05:19.880 align:middle
クラスメソッドは普通のメソッドです。

00:05:20.040 --> 00:05:22.320 align:middle
クラスメソッドを追加するには
クラスボタンを押してから

00:05:22.480 --> 00:05:24.440 align:middle
メソッドを作ります。

00:05:24.840 --> 00:05:27.840 align:middle
これで第 1 週の講義はおしまいです。

00:05:28.000 --> 00:05:29.400 align:middle
来週は

00:05:29.560 --> 00:05:32.800 align:middle
Pharo の構文について
より細部まで見ていきます。

00:05:32.960 --> 00:05:37.480 align:middle
ブロックや、オブジェクトインスペクター
と呼ばれるツールについてです。

